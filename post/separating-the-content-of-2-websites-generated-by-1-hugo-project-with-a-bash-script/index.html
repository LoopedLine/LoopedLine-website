<!DOCTYPE html>
<html lang="en-us">
    <head>
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Separating the Content of 2 Websites Generated by 1 Hugo Project with a Bash Script</title>
        
                
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">

        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" crossorigin="anonymous">

        
        

        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />

        <style>

            html body {
                font-family: 'Raleway', sans-serif;
                background-color: lightgray;
            }

            :root {
                --accent: purple;
                --border-width:  5px ;
            }

        </style>

        
        <link rel="stylesheet" href="https://loopedline.com/css/main.css">
        <link rel="stylesheet" href="https://loopedline.com/css/custom.css">

        
        
                
        

        
        

        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

        
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

        
        <script>$(document).on('click', function() { $('.collapse').collapse('hide'); })</script>
        <meta name="generator" content="Hugo 0.92.2" />
        
    

    

    
        <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

        
    </head>

    <body>
        
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand visible-xs" href="#">Separating the Content of 2 Websites Generated by 1 Hugo Project with a Bash Script</a>
                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse">
                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="https://loopedline.com/">Home</a></li>
                            
                                <li><a href="https://loopedline.com/about/">About</a></li>
                            
                                <li><a href="https://loopedline.com/post/build/">Build</a></li>
                            
                                <li><a href="https://loopedline.com/post/learn/">Learn</a></li>
                            
                        </ul>
                    
                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="https://github.com/LoopedLine/"><i class="fab fa-github"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://page.loopedline.com/contact/"><i class="fas fa-envelope"></i></a></li>
                            
                        </ul>
                    
                </div>
            </div>
        </nav>


<main>

    
    <div>
        <h2>Separating the Content of 2 Websites Generated by 1 Hugo Project with a Bash Script</h2>
        











    <p>Published: 2022 May 24</p>




        
<a href="https://loopedline.com/tags/system-administration"><kbd class="item-tag">system administration</kbd></a>

<a href="https://loopedline.com/tags/linux"><kbd class="item-tag">Linux</kbd></a>

<a href="https://loopedline.com/tags/bash"><kbd class="item-tag">Bash</kbd></a>

<a href="https://loopedline.com/tags/shell-script"><kbd class="item-tag">shell script</kbd></a>

<a href="https://loopedline.com/tags/software-development"><kbd class="item-tag">software development</kbd></a>

<a href="https://loopedline.com/tags/web-development"><kbd class="item-tag">web development</kbd></a>

<a href="https://loopedline.com/tags/static-site-generator"><kbd class="item-tag">static site generator</kbd></a>

<a href="https://loopedline.com/tags/hugo-theme"><kbd class="item-tag">Hugo theme</kbd></a>


    </div>

    
    <div align="start" class="content"><!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="background">Background</h2>
<p>This project is built with <a href="https://loopedline.com/post/building-your-first-hugo-website/">Hugo</a> and uses the <a href="https://themes.gohugo.io/themes/minimal/">Minimal</a> Hugo theme.</p>
<p>This post is part of <a href="https://loopedline.com/post/changing-a-hugo-theme-over-time/">an ongoing effort to tailor the theme over time</a>.</p>
<p>Specifically, this post is part of <a href="https://loopedline.com/post/project-building-a-contact-form-with-hugo-and-hosting-it-with-netlify/">a project to build a contact form with Hugo and host it with Netlify</a>.</p>
<h2 id="objective">Objective</h2>
<p>In this post we&rsquo;ll develop Bash scripts to separate the content for two website subdomains that was generated by one Hugo project.</p>
<p><a href="https://loopedline.com/post/setting-up-a-website-subdomain-to-host-content-with-different-providers/#building-the-hugo-project">As previously mentioned</a>, we built our solution for both sites inside a single Hugo project.</p>
<p>However, we wish to manage and deploy the content of those sites separately.</p>
<p>We&rsquo;ll use Bash scripts to separate the files generated by the project for the two subdomains.</p>
<h2 id="building-the-solution-for-the-main-subdomain">Building the solution for the main subdomain</h2>
<p>In a previous post, we discussed <a href="https://loopedline.com/post/automating-hugo-website-publishing-with-bash/">using Bash scripts to automate our Hugo website publishing workflow</a>.</p>
<p>We&rsquo;ll alter and extend those scripts to handle our updated workflow.</p>
<h3 id="creating-a-new-file-deletion-script">Creating a new file deletion script</h3>
<p>The only change in the current workflow for our main site content is that we want to delete the new contact files before we push changes to our main repository.  Since we already have a Bash script that deletes files from a specified directory (<em>sitebuild_02_deletefiles.sh</em>), we&rsquo;ll start with that and make any necessary alterations.  And since we want to keep those files for the other subdomain, we&rsquo;ll add this new deletion step to the end of our current process and only delete files from the main site publication directory.</p>
<p>We&rsquo;ll copy the <em>sitebuild_02_deletefiles.sh</em> script, rename it to <strong>sitebuild_04_deletedirectory.sh</strong>, and update it to the following.  (All altered lines are highlighted.)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># VARIABLES</span>
directoryofwebsiteforpublishing<span style="color:#f92672">=</span>$1
<span style="display:block;width:100%;background-color:#3c3d38">subdirectorytodelete<span style="color:#f92672">=</span>$2
</span><span style="display:block;width:100%;background-color:#3c3d38">fulldirectory<span style="color:#f92672">=</span>$directoryofwebsiteforpublishing/$subdirectorytodelete
</span>
<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#75715e"># FUNCTION deletefilesanddirectories - deletes all files and directories in a specified directory</span>
</span>deletefilesanddirectories<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	cd $directoryofwebsiteforpublishing

<span style="display:block;width:100%;background-color:#3c3d38">	rm --verbose --recursive $subdirectorytodelete
</span><span style="color:#f92672">}</span>

<span style="color:#75715e"># FUNCTION indent - indents a line before outputting</span>
indent<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	sed <span style="color:#e6db74">&#39;s/^/  /&#39;</span>;
<span style="color:#f92672">}</span>

<span style="color:#75715e"># FUNCTION warningwithprompt - prints a warning that the script will delete files and subdirectories and prompts the user before continuing</span>
warningwithprompt<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
<span style="display:block;width:100%;background-color:#3c3d38">	cd $fulldirectory
</span>
<span style="display:block;width:100%;background-color:#3c3d38">	echo <span style="color:#e6db74">&#34;This script will DELETE the contents of </span>$fulldirectory<span style="color:#e6db74">&#34;</span>
</span>	echo
	echo <span style="color:#e6db74">&#34;This script will DELETE the following files, subdirectories, and ALL subdirectory contents:&#34;</span>
	echo

<span style="display:block;width:100%;background-color:#3c3d38">	ls -1 --color | indent
</span>
	echo

	read -n1 -p <span style="color:#e6db74">&#34;Do you wish to proceed? [y/n] &#34;</span> response

	<span style="color:#75715e"># Convert response to lowercase</span>
	response<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>response,,<span style="color:#e6db74">}</span>

	echo
	echo
<span style="color:#f92672">}</span>

<span style="color:#75715e"># MAIN program flow</span>
echo
echo <span style="color:#e6db74">&#34;Executing </span>$BASH_SOURCE<span style="color:#e6db74">&#34;</span>
echo

warningwithprompt

<span style="color:#66d9ef">case</span> $response in
  y|ye|yes<span style="color:#f92672">)</span>
    echo Executing script.
	echo
	
	deletefilesanddirectories
	
	echo
	echo Script completed.
	echo
  ;;
  *<span style="color:#f92672">)</span>
    echo Deletion cancelled.
	echo
	
	exit
  ;;
<span style="color:#66d9ef">esac</span>
</code></pre></div><p>Because we don&rsquo;t have a file to preserve, we removed all references to that specific functionality.</p>
<p>That also allowed us to use the <strong>rm</strong> command directly instead of piping a list of files and directories to it.</p>
<p>We also altered the way directory variables were defined to make it a little simpler to reference them in commands.</p>
<h3 id="updating-the-calling-script-for-the-main-content-workflow">Updating the calling script for the main content workflow</h3>
<p>Next, we only needed to make a few small changes to our main workflow calling script.</p>
<p>We renamed the <em>sitebuild_00_publishsite.sh</em> script to <strong>publish-main-site.sh</strong> and updated it to the following.  (All altered lines are highlighted.)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># VARIABLES</span>
directoryofhugoproject<span style="color:#f92672">=</span>/home/user/TEMP/test-directory/hugo-project-directory
directoryofhugoprojectfiles<span style="color:#f92672">=</span>/home/user/TEMP/test-directory/hugo-project-directory/public

<span style="display:block;width:100%;background-color:#3c3d38">directoryofwebsiteforpublishing_main<span style="color:#f92672">=</span>/home/user/TEMP/main-directory/publishing-directory
</span><span style="display:block;width:100%;background-color:#3c3d38">filetonotdelete_main<span style="color:#f92672">=</span>other.html
</span><span style="display:block;width:100%;background-color:#3c3d38">directorytodelete_main<span style="color:#f92672">=</span>contact
</span>
<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#75715e"># FUNCTION script_info - provide contextual output</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">script_info<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo <span style="color:#f92672">=============================================================</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo <span style="color:#f92672">====================</span> script info - START <span style="color:#f92672">====================</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo <span style="color:#e6db74">&#34;Executing </span>$BASH_SOURCE<span style="color:#e6db74">&#34;</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo <span style="color:#e6db74">&#34;This script rebuilds ONLY the MAIN website content.&#34;</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo <span style="color:#f92672">=====================</span> script info - END <span style="color:#f92672">=====================</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo <span style="color:#f92672">=============================================================</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#f92672">}</span>
</span>
<span style="color:#75715e"># FUNCTION sb_rebuildsite - run the sitebuild_01_rebuildsite.sh script with additional output</span>
sb_rebuildsite<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	echo
	echo
	echo ---------- Step 1: Rebuild site - START ----------
	
	source sitebuild_01_rebuildsite.sh $directoryofhugoproject
	
	echo ---------- Step 1: Rebuild site - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#75715e"># FUNCTION sb_deleteoldfiles_main - run the sitebuild_02_deletefiles.sh script with additional output</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">sb_deleteoldfiles_main<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span>	echo
	echo
	echo ---------- Step 2: Delete files - START ----------
	
<span style="display:block;width:100%;background-color:#3c3d38">	source sitebuild_02_deletefiles.sh $directoryofwebsiteforpublishing_main $filetonotdelete_main
</span>	
	echo ---------- Step 2: Delete files - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#75715e"># FUNCTION sb_copyfiles_main - run the sitebuild_03_copyfiles.sh script with additional output</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">sb_copyfiles_main<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span>	echo
	echo
	echo ---------- Step 3: Copy files - START ----------
	
<span style="display:block;width:100%;background-color:#3c3d38">	source sitebuild_03_copyfiles.sh $directoryofhugoprojectfiles $directoryofwebsiteforpublishing_main
</span>	
	echo ---------- Step 3: Copy files - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#75715e"># FUNCTION sb_deletecontactdirectory_main - run the sitebuild_04_deletedirectory.sh script with additional output</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">sb_deletecontactdirectory_main<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo ---------- Step 4: Delete files - START ----------
</span><span style="display:block;width:100%;background-color:#3c3d38">	
</span><span style="display:block;width:100%;background-color:#3c3d38">	source sitebuild_04_deletedirectory.sh $directoryofwebsiteforpublishing_main $directorytodelete_main
</span><span style="display:block;width:100%;background-color:#3c3d38">	
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo ---------- Step 4: Delete files - END ----------
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38">	echo
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#f92672">}</span>
</span>
<span style="color:#75715e"># MAIN program flow</span>
<span style="display:block;width:100%;background-color:#3c3d38">script_info
</span>
<span style="display:block;width:100%;background-color:#3c3d38">sb_rebuildsite <span style="color:#f92672">&amp;&amp;</span> sb_deleteoldfiles_main <span style="color:#f92672">&amp;&amp;</span> sb_copyfiles_main <span style="color:#f92672">&amp;&amp;</span> sb_deletecontactdirectory_main
</span></code></pre></div><p>The first set of changes was to rename several of the variables to include the <em>_main</em> suffix to help distinguish those variables from others that would later reference directories and files for the contact subdomain.</p>
<p>Next, additional visual output was removed from the main program flow and put in a new function called <em>script_info</em>.</p>
<p>The most significant functional change was creating a new function, <em>sb_deletecontactdirectory_main</em>, that calls the <em>sitebuild_04_deletedirectory.sh</em> script and adding the <em>directorytodelete</em> variable to pass to the script.</p>
<h2 id="building-the-solution-for-the-contact-subdomain">Building the solution for the contact subdomain</h2>
<p>The workflow for building the files of the <em>contact</em> subdomain is almost identical to that of the legacy main subdomain workflow.  Only the files to be copied and the target directory are different.</p>
<p>To automate the workflow for the contact domain, we copied the relevant updated scripts for building the main subdomain and made minor alterations.</p>
<h3 id="creating-a-new-directory-copying-script">Creating a new directory copying script</h3>
<p>Our current script for copying files is a close match for what we want to accomplish here.  So, we&rsquo;ll copy the <em>sitebuild_03_copyfiles.sh</em> script and rename it to <strong>sitebuild_05_copydirectory.sh</strong>.</p>
<p>However, for our contact subdomain files we only want to copy a single subdirectory, instead of every subdirectory and file except one.  To accomplish that we added a variable to specify the desired subdirectory and altered the call to the <strong>cp</strong> function to reference that subdirectory.</p>
<p>The updated code is below.  (All altered lines are highlighted.)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># VARIABLES</span>
directoryofhugoprojectfiles<span style="color:#f92672">=</span>$1
directoryofwebsiteforpublishing<span style="color:#f92672">=</span>$2
<span style="display:block;width:100%;background-color:#3c3d38">directorytocopy<span style="color:#f92672">=</span>$3
</span>
<span style="color:#75715e"># FUNCTION copyfilesanddirectories - copy all files and directories in a specified directory to another specified directory</span>
copyfilesanddirectories<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    echo <span style="color:#e6db74">&#34;Copying files.&#34;</span>
	echo
	echo <span style="color:#e6db74">&#34;FROM:&#34;</span>
<span style="display:block;width:100%;background-color:#3c3d38">	echo <span style="color:#e6db74">&#34;</span>$directoryofhugoprojectfiles<span style="color:#e6db74">/</span>$directorytocopy<span style="color:#e6db74">&#34;</span>
</span>	echo
	echo <span style="color:#e6db74">&#34;TO:&#34;</span>
	echo <span style="color:#e6db74">&#34;</span>$directoryofwebsiteforpublishing<span style="color:#e6db74">&#34;</span>
	echo
	
<span style="display:block;width:100%;background-color:#3c3d38">	cp --recursive $directoryofhugoprojectfiles/$directorytocopy $directoryofwebsiteforpublishing/
</span><span style="color:#f92672">}</span>

<span style="color:#75715e"># MAIN program flow</span>
echo
echo <span style="color:#e6db74">&#34;Executing </span>$BASH_SOURCE<span style="color:#e6db74">&#34;</span>
echo

copyfilesanddirectories
</code></pre></div><h3 id="creating-a-calling-script-for-the-contact-content-workflow">Creating a calling script for the contact content workflow</h3>
<p>Next, we created a new contact workflow calling script.</p>
<p>We copied the <em>publish-main-site.sh</em> script, renamed it to <strong>publish-contact-site.sh</strong>, and updated it for this workflow.  All the altered lines are highlighted.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># VARIABLES</span>
directoryofhugoproject<span style="color:#f92672">=</span>/home/user/TEMP/test-directory/hugo-project-directory
directoryofhugoprojectfiles<span style="color:#f92672">=</span>/home/user/TEMP/test-directory/hugo-project-directory/public

<span style="display:block;width:100%;background-color:#3c3d38">directoryofwebsiteforpublishing_contact<span style="color:#f92672">=</span>/home/user/TEMP/contact-directory/publishing-directory
</span><span style="display:block;width:100%;background-color:#3c3d38">filetonotdelete_contact<span style="color:#f92672">=</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">directorytocopy_contact<span style="color:#f92672">=</span>contact/contact
</span>
<span style="color:#75715e"># FUNCTION script_info - provide contextual output</span>
script_info<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	echo
	echo
	
	echo
	echo
	echo <span style="color:#f92672">=============================================================</span>
	echo <span style="color:#f92672">====================</span> script info - START <span style="color:#f92672">====================</span>
	echo
	echo <span style="color:#e6db74">&#34;Executing </span>$BASH_SOURCE<span style="color:#e6db74">&#34;</span>
	echo
<span style="display:block;width:100%;background-color:#3c3d38">	echo <span style="color:#e6db74">&#34;This script rebuilds ONLY the CONTACT website content.&#34;</span>
</span>	echo
	echo <span style="color:#f92672">=====================</span> script info - END <span style="color:#f92672">=====================</span>
	echo <span style="color:#f92672">=============================================================</span>
	echo
	echo
<span style="color:#f92672">}</span>

<span style="color:#75715e"># FUNCTION sb_rebuildsite - run the sitebuild_01_rebuildsite.sh script with additional output</span>
sb_rebuildsite<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	echo
	echo
	echo ---------- Step 1: Rebuild site - START ----------
	
	source sitebuild_01_rebuildsite.sh $directoryofhugoproject
	
	echo ---------- Step 1: Rebuild site - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#75715e"># FUNCTION sb_deleteoldfiles_contact - run the sitebuild_02_deletefiles.sh script with additional output</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">sb_deleteoldfiles_contact<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span>	echo
	echo
	echo ---------- Step 2: Delete files - START ----------
	
<span style="display:block;width:100%;background-color:#3c3d38">	source sitebuild_02_deletefiles.sh $directoryofwebsiteforpublishing_contact $filetonotdelete_contact
</span>	
	echo ---------- Step 2: Delete files - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#75715e"># FUNCTION sb_copyfiles_contact - run the sitebuild_03_copyfiles.sh script with additional output</span>
</span><span style="display:block;width:100%;background-color:#3c3d38">sb_copyfiles_contact<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span>	echo
	echo
	echo ---------- Step 3: Copy files - START ----------
	
<span style="display:block;width:100%;background-color:#3c3d38">	source sitebuild_05_copydirectory.sh $directoryofhugoprojectfiles $directoryofwebsiteforpublishing_contact $directorytocopy_contact
</span>	
	echo ---------- Step 3: Copy files - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="color:#75715e"># MAIN program flow</span>
script_info

<span style="display:block;width:100%;background-color:#3c3d38">sb_rebuildsite <span style="color:#f92672">&amp;&amp;</span> sb_deleteoldfiles_contact <span style="color:#f92672">&amp;&amp;</span> sb_copyfiles_contact
</span></code></pre></div><p>As before, the first set of changes was to rename several of the variables to include the <em>_contact</em> suffix to help distinguish those variables from others for the main subdomain.</p>
<p>Similarly, function names and descriptions were amended for the same reason.</p>
<p>The <em>filetonotdelete_contact</em> variable was left blank because there wasn&rsquo;t a file we wanted to preserve.</p>
<p>The last function that calls the <em>sitebuild_04_deletedirectory.sh</em> script was removed because it isn&rsquo;t needed for this workflow.</p>
<h3 id="creating-a-calling-script-for-the-overall-workflow">Creating a calling script for the overall workflow</h3>
<p>We also created a new overall workflow calling script.</p>
<p>We copied the <em>publish-main-site.sh</em> script, renamed it to <strong>publishsite.sh</strong>, and updated it to include the revelant elements of both the main and contact workflows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># VARIABLES</span>
directoryofhugoproject<span style="color:#f92672">=</span>/home/user/TEMP/test-directory/hugo-project-directory
directoryofhugoprojectfiles<span style="color:#f92672">=</span>/home/user/TEMP/test-directory/hugo-project-directory/public

directoryofwebsiteforpublishing_main<span style="color:#f92672">=</span>/home/user/TEMP/main-directory/publishing-directory
filetonotdelete_main<span style="color:#f92672">=</span>other.html
directorytodelete_main<span style="color:#f92672">=</span>contact

directoryofwebsiteforpublishing_contact<span style="color:#f92672">=</span>/home/user/TEMP/contact-directory/publishing-directory
filetonotdelete_contact<span style="color:#f92672">=</span>
directorytocopy_contact<span style="color:#f92672">=</span>contact/contact

<span style="color:#75715e"># FUNCTION script_info - provide contextual output</span>
script_info<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	echo
	echo
	
	echo
	echo
	echo <span style="color:#f92672">=============================================================</span>
	echo <span style="color:#f92672">====================</span> script info - START <span style="color:#f92672">====================</span>
	echo
	echo <span style="color:#e6db74">&#34;Executing </span>$BASH_SOURCE<span style="color:#e6db74">&#34;</span>
	echo
	echo <span style="color:#e6db74">&#34;This script rebuilds BOTH the MAIN and CONTACT website content.&#34;</span>
	echo
	echo <span style="color:#f92672">=====================</span> script info - END <span style="color:#f92672">=====================</span>
	echo <span style="color:#f92672">=============================================================</span>
	echo
	echo
<span style="color:#f92672">}</span>

<span style="color:#75715e"># FUNCTION sb_rebuildsite - run the sitebuild_01_rebuildsite.sh script with additional output</span>
sb_rebuildsite<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	echo
	echo
	echo ---------- Step 1: Rebuild site - START ----------
	
	source sitebuild_01_rebuildsite.sh $directoryofhugoproject
	
	echo ---------- Step 1: Rebuild site - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="color:#75715e"># FUNCTION sb_deleteoldfiles_main - run the sitebuild_02_deletefiles.sh script with additional output</span>
sb_deleteoldfiles_main<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	echo
	echo
	echo ---------- Step 2: Delete files - START ----------
	
	source sitebuild_02_deletefiles.sh $directoryofwebsiteforpublishing_main $filetonotdelete_main
	
	echo ---------- Step 2: Delete files - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="color:#75715e"># FUNCTION sb_copyfiles_main - run the sitebuild_03_copyfiles.sh script with additional output</span>
sb_copyfiles_main<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	echo
	echo
	echo ---------- Step 3: Copy files - START ----------
	
	source sitebuild_03_copyfiles.sh $directoryofhugoprojectfiles $directoryofwebsiteforpublishing_main
	
	echo ---------- Step 3: Copy files - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="color:#75715e"># FUNCTION sb_deletecontactdirectory_main - run the sitebuild_04_deletedirectory.sh script with additional output</span>
sb_deletecontactdirectory_main<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	echo
	echo
	echo ---------- Step 4: Delete files - START ----------
	
	source sitebuild_04_deletedirectory.sh $directoryofwebsiteforpublishing_main $directorytodelete_main
	
	echo ---------- Step 4: Delete files - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="color:#75715e"># FUNCTION sb_deleteoldfiles_contact - run the sitebuild_02_deletefiles.sh script with additional output</span>
sb_deleteoldfiles_contact<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	echo
	echo
	echo ---------- Step 5: Delete files - START ----------
	
	source sitebuild_02_deletefiles.sh $directoryofwebsiteforpublishing_contact $filetonotdelete_contact
	
	echo ---------- Step 5: Delete files - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="color:#75715e"># FUNCTION sb_copyfiles_contact - run the sitebuild_03_copyfiles.sh script with additional output</span>
sb_copyfiles_contact<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	echo
	echo
	echo ---------- Step 6: Copy files - START ----------
	
	source sitebuild_05_copydirectory.sh $directoryofhugoprojectfiles $directoryofwebsiteforpublishing_contact $directorytocopy_contact
	
	echo ---------- Step 6: Copy files - END ----------
	echo
	echo
<span style="color:#f92672">}</span>

<span style="color:#75715e"># MAIN program flow</span>
script_info

sb_rebuildsite <span style="color:#f92672">&amp;&amp;</span> sb_deleteoldfiles_main <span style="color:#f92672">&amp;&amp;</span> sb_copyfiles_main <span style="color:#f92672">&amp;&amp;</span> sb_deletecontactdirectory_main <span style="color:#f92672">&amp;&amp;</span> sb_deleteoldfiles_contact <span style="color:#f92672">&amp;&amp;</span> sb_copyfiles_contact

</code></pre></div><p>The only changes that were necessary were updating the script info description, renumbering the last steps, and incorporating the script calls and variables from both the main and contact workflow.  All other elements are the same.</p>
<h2 id="conclusion">Conclusion</h2>
<p>We now have three new and/or updated workflows that allow us to rebuild the main site content, the contact site contact, or both at the same time.</p>
<!-- raw HTML omitted -->
</div>

    
    
    
        <h4 class="page-header">Related</h4>
         <div class="item">



    
    
    <h4 id="listpage-item"><a href="/post/backing-up-vs-code-settings-and-extensions-with-a-bash-script/">Backing Up Visual Studio Code (VS Code) Settings and Extensions With a Bash Script</a></h4>



    

    
    
    

    
    
    

    
    

    <p>
        Published: 2022 November 09
        
    </p>



</div>
  <div class="item">



    
    
    <h4 id="listpage-item"><a href="/post/backing-up-a-directory-structure-with-the-tree-command-in-a-bash-script/">Backing Up a Directory Structure With the Tree Command in a Bash Script</a></h4>



    

    
    
    

    
    
    

    
    

    <p>
        Published: 2022 November 07
        
    </p>



</div>
  <div class="item">



    
    
    <h4 id="listpage-item"><a href="/post/getting-started-with-the-tree-command-in-bash/">Getting Started with the Tree Command in Bash</a></h4>



    

    
    
    

    
    
    

    
    

    <p>
        Published: 2022 November 06
        
    </p>



</div>
 
    

</main>



        <footer>
            <p class="copyright text-muted">Â© All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a> and <a href="https://loopedline.com/bespoke/main.html">Bespoke</a>.</p>

        </footer>

        
        
    </body>

</html>